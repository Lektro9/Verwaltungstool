(this.webpackJsonpappgateway=this.webpackJsonpappgateway||[]).push([[0],{163:function(e,t,n){},188:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),i=n(16),s=n.n(i),o=(n(163),n(37)),l=n(20),u=n(7),d=n(234),j=n(139),b=n(67),h=n(19),O=n.n(h),f={accessToken:"",setAccessToken:function(){}},m=Object(r.createContext)(f),p=function(){var e=Object(l.h)().state,t=Object(r.useState)(""),n=Object(u.a)(t,2),c=n[0],i=n[1],s=Object(r.useState)(""),o=Object(u.a)(s,2),h=o[0],f=o[1],p=Object(r.useState)(),x=Object(u.a)(p,2),v=x[0],g=x[1],y=Object(r.useContext)(m);return y.accessToken?Object(a.jsx)(l.a,{to:(null===e||void 0===e?void 0:e.from)||"/"}):Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("h1",{children:"Verwaltungstool"}),Object(a.jsxs)(d.a,{component:"main",maxWidth:"xs",onSubmit:function(e){e.preventDefault(),O.a.post("http://localhost:3005/login",{login:c,password:h},{withCredentials:!0}).then((function(e){e.data.accessToken?(g(),y.setAccessToken(e.data.accessToken),O.a.defaults.headers.common.Authorization="Bearer "+e.data.accessToken):g(e),console.log(e)})).catch((function(e){g(e.message),console.log(e)}))},children:[Object(a.jsxs)("form",{noValidate:!0,children:[Object(a.jsx)(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoFocus:!0,onInput:function(e){return i(e.target.value)}}),Object(a.jsx)(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onInput:function(e){return f(e.target.value)}}),Object(a.jsx)(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Log In"})]}),Object(a.jsx)("p",{children:JSON.stringify(v)}),Object(a.jsx)("p",{children:JSON.stringify(y)})]})]})},x=n(9);function v(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}var g=function(e){Object(r.useEffect)((function(){O.a.get("http://localhost:3005/token",{withCredentials:!0}).then((function(e){t(e.data.accessToken),O.a.defaults.headers.common.Authorization="Bearer "+e.data.accessToken})).catch((function(e){console.log(e)}))}),[]);var t=function(e){o(e?Object(x.a)(Object(x.a)({},s),{},{accessToken:e,user:v(e)}):Object(x.a)(Object(x.a)({},s),{},{accessToken:e,user:{}}))},n={accessToken:"",user:{},setAccessToken:t},c=Object(r.useState)(n),i=Object(u.a)(c,2),s=i[0],o=i[1];return Object(a.jsx)(m.Provider,{value:s,children:e.children})},y=function(){var e=Object(r.useContext)(m),t=Object(l.g)();return console.log(e.user),e.accessToken?Object(a.jsxs)("p",{children:["eingeloggt als ",e.user.username,Object(a.jsx)("button",{onClick:function(){e.setAccessToken(""),t.push("/"),O.a.get("http://localhost:3005/logout",{withCredentials:!0}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},children:"sign out"})]}):Object(a.jsx)("p",{children:"You are not logged in!"})},C=n(129),T=function(e){var t=e.children,n=Object(C.a)(e,["children"]),c=Object(r.useContext)(m);return Object(a.jsx)(l.b,Object(x.a)(Object(x.a)({},n),{},{render:function(e){var n=e.location;return c.accessToken?t:Object(a.jsx)(l.a,{to:{pathname:"/login",state:{from:n}}})}}))},N=n(38),w=n(62),I=n(126),k=n.n(I),S=n(127),P=n.n(S),D=n(124),z=Object(r.createContext)([]),F=n(28),M=n.n(F),V=n(54),q="http://0.0.0.0:3004/api/v1/personenverwaltung/persons/",E=function(){var e=Object(V.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(q);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(V.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(q+t,{method:"DELETE"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(V.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(V.a)(M.a.mark((function e(t,n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(q+t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=n(15),H=n(74),U=n(261),J=n(241),G=n(258),R=n(136),X=n(85),Y=n.n(X),_=Object(N.a)({main:{width:"100%"},root:{display:"flex",flexDirection:"column"},formControl:{margin:"5px 10px",width:"60ch"}}),K=function(e){var t=e.handleDialogClose,n=e.person,c=_(),i=Object(r.useContext)(z);console.log(n[0]);var s={fussballspieler:"fieldPosition",handballspieler:"fieldPosition",tennisspieler:"handedness",trainer:"experience",physiotherapeut:"treatmentType"},o=Object(r.useState)(n[0].firstName),l=Object(u.a)(o,2),d=l[0],h=l[1],O=Object(r.useState)(n[0].lastName),f=Object(u.a)(O,2),m=f[0],p=f[1],v=Object(r.useState)(new Date(n[0].birthday).toISOString().split("T")[0]),g=Object(u.a)(v,2),y=g[0],C=g[1],T=Object(r.useState)(n[0][n[0].type][s[n[0].type]]),N=Object(u.a)(T,2),w=N[0],I=N[1],k=Object(r.useState)(0),S=Object(u.a)(k,2),P=S[0],D=S[1],F=["Personendaten","Typdaten"];return Object(a.jsxs)("div",{className:c.main,children:[Object(a.jsx)(U.a,{activeStep:P,children:F.map((function(e){return Object(a.jsx)(J.a,Object(x.a)(Object(x.a)({},{}),{},{children:Object(a.jsx)(G.a,Object(x.a)(Object(x.a)({},{}),{},{children:e}))}),e)}))}),Object(a.jsx)("div",{children:P===F.length?Object(a.jsxs)("div",{children:[Object(a.jsx)(R.a,{className:c.instructions,children:Object(a.jsxs)("div",{children:["Type: ",n[0].type," ",Object(a.jsx)("br",{}),"Vorname: ",d," ",Object(a.jsx)("br",{}),"Nachname: ",m," ",Object(a.jsx)("br",{}),"Geburtstag: ",y," ",Object(a.jsx)("br",{}),{fieldPosition:"Position",handedness:"Handigkeit",experience:"Erfahrung",treatmentType:"Therapiemethode"}[s[n[0].type]],": ",w]})}),Object(a.jsx)(b.a,{onClick:function(){h(n[0].firstName),p(n[0].lastName),C(new Date(n[0].birthday).toISOString().split("T")[0]),I(n[0][n[0].type][s[n[0].type]]),D(0)},className:c.button,children:"Reset"}),Object(a.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(e){e.preventDefault();var a={type:n[0].type,firstName:d,lastName:m,birthday:new Date(y).getTime()};a[s[n[0].type]]=w,L(n[0].id,a).then((function(e){200===e.status&&i.persons.forEach((function(e){e.id===n[0].id&&(e.firstName=d,e.lastName=m,e.birthday=y,e[s[n[0].type]]=w,i.setPersons(Object(B.a)(i.persons)))}))})),t()},children:"Hinzuf\xfcgen"})]}):Object(a.jsxs)("div",{children:[Object(a.jsx)(R.a,{className:c.instructions,children:function(e){switch(e){case 0:return Object(a.jsxs)("div",{className:c.root,children:[Object(a.jsx)(H.a,{className:c.formControl,children:Object(a.jsx)(j.a,{variant:"outlined",required:!0,id:"firstName",label:"Vorname",name:"firstName",autoFocus:!0,value:d,onInput:function(e){h(e.target.value)}})}),Object(a.jsx)(H.a,{className:c.formControl,children:Object(a.jsx)(j.a,{variant:"outlined",required:!0,name:"lastName",label:"Nachname",id:"lastName",value:m,onInput:function(e){p(e.target.value)}})}),Object(a.jsx)(H.a,{className:c.formControl,children:Object(a.jsx)(j.a,{variant:"outlined",required:!0,name:"birthday",id:"birthday",fullWidth:!0,type:"date",value:y,onInput:function(e){C(e.target.value)}})})]});case 1:switch(n[0].type){case"fussballspieler":return Object(a.jsx)(H.a,{className:c.formControl,children:Object(a.jsx)(j.a,{variant:"outlined",required:!0,name:"fieldPosition",label:"Spielposition",id:"fussballfieldPosition",value:w,onInput:function(e){I(e.target.value)}})});case"handballspieler":return Object(a.jsx)(H.a,{className:c.formControl,children:Object(a.jsx)(j.a,{variant:"outlined",required:!0,name:"fieldPosition",label:"Spielposition",id:"handballfieldPosition",value:w,onInput:function(e){I(e.target.value)}})});case"tennisspieler":return Object(a.jsx)(H.a,{className:c.formControl,children:Object(a.jsx)(j.a,{variant:"outlined",required:!0,name:"handedness",label:"H\xe4ndigkeit",id:"handedness",value:w,onInput:function(e){I(e.target.value)}})});case"trainer":return Object(a.jsx)(H.a,{className:c.formControl,children:Object(a.jsx)(j.a,{variant:"outlined",required:!0,type:"number",name:"experience",label:"Erfahrung",id:"experience",value:w,onInput:function(e){I(e.target.value)}})});case"physiotherapeut":return Object(a.jsx)(H.a,{className:c.formControl,children:Object(a.jsx)(j.a,{variant:"outlined",required:!0,name:"treatmentType",label:"Behandlungsmethode",id:"treatmentType",value:w,onInput:function(e){I(e.target.value)}})});default:return Object(a.jsx)("div",{children:"Wrong Persontype"})}default:return Object(a.jsxs)("div",{children:[Object(a.jsx)(Y.a,{}),"Unknown step"]})}}(P)}),Object(a.jsx)("div",{children:Object(a.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){D((function(e){return e+1}))},children:"Weiter"})})]})})]})},Q=n(259),Z=n(242),$=n(243),ee=function(e){var t=e.onClick,n=e.dialogState,r=e.person;return Object(a.jsx)("div",{children:Object(a.jsxs)(Q.a,{open:n,onClose:t,children:[Object(a.jsx)(Z.a,{id:"createPerson",onClose:t,children:"Person hinzuf\xfcgen"}),Object(a.jsx)($.a,{children:Object(a.jsx)(K,{handleDialogClose:t,person:r})})]})})},te=function(){var e=Object(r.useContext)(m),t=Object(r.useContext)(z),n=Object(r.useState)(!1),c=Object(u.a)(n,2),i=c[0],s=c[1],o=Object(r.useState)(0),l=Object(u.a)(o,2),j=l[0],b=l[1],h=[{field:"id",headerName:"ID",width:70},{field:"type",headerName:"Type",width:130},{field:"firstName",headerName:"Vorname",width:130},{field:"lastName",headerName:"Nachname",width:130},{field:"birthday",headerName:"Geburtstag",type:"date",width:150,valueFormatter:function(e){return new Date(e.value).toLocaleDateString()}},{field:"fullName",headerName:"Full name",description:"This column has a value getter and is not sortable.",sortable:!1,width:180,valueGetter:function(e){return"".concat(e.getValue("firstName")||""," ").concat(e.getValue("lastName")||"")}},{field:"delete",headerName:"L\xf6schen",renderCell:function(t){if(e.user.role)return Object(a.jsx)(w.a,{"aria-label":"delete",onClick:function(){O(t.getValue("id"))},children:Object(a.jsx)(k.a,{})})}},{field:"edit",headerName:"Editieren",renderCell:function(t){if(e.user.role)return Object(a.jsx)(w.a,{"aria-label":"edit",onClick:function(){f(t.getValue("id"))},children:Object(a.jsx)(P.a,{})})}}],O=function(e){A(e);var n=t.persons.filter((function(t){return t.id!==e}));t.setPersons(n)},f=function(e){b(e),s(!0)};return Object(a.jsxs)(d.a,{children:[Object(a.jsx)("div",{style:{width:"100%",height:500},children:Object(a.jsx)(D.a,{rows:t.persons,columns:h,pageSize:10})}),Object(a.jsx)(ee,{onClick:function(){s(!1)},dialogState:i,person:t.persons.filter((function(e){return e.id===j}))})]})},ne=n(106),ae=n(104),re=n(63),ce=Object(N.a)({root:{display:"flex",flexDirection:"column"},formControl:{margin:"5px 10px",width:"60ch"}}),ie=function(e){var t=e.onAddPersonData,n=ce(),c=Object(r.useState)(""),i=Object(u.a)(c,2),s=i[0],o=i[1];return Object(a.jsxs)("div",{className:n.root,children:[Object(a.jsx)(H.a,{className:n.formControl,children:Object(a.jsx)(j.a,{variant:"outlined",required:!0,id:"firstName",label:"Vorname",name:"firstName",autoFocus:!0,onInput:t})}),Object(a.jsx)(H.a,{className:n.formControl,children:Object(a.jsx)(j.a,{variant:"outlined",required:!0,name:"lastName",label:"Nachname",id:"lastName",onInput:t})}),Object(a.jsx)(H.a,{className:n.formControl,children:Object(a.jsx)(j.a,{variant:"outlined",required:!0,name:"birthday",id:"birthday",fullWidth:!0,type:"date",onInput:t})}),Object(a.jsxs)(H.a,{className:n.formControl,children:[Object(a.jsx)(ne.a,{id:"personType-label",children:"Personentyp"}),Object(a.jsxs)(ae.a,{labelId:"personType-label",name:"type",id:"personType",value:s,onChange:function(e){t(e),o(e.target.value)},children:[Object(a.jsx)(re.a,{value:"fussballspieler",children:"Fu\xdfballspieler"}),Object(a.jsx)(re.a,{value:"handballspieler",children:"Handballspieler"}),Object(a.jsx)(re.a,{value:"tennisspieler",children:"Tennisspieler"}),Object(a.jsx)(re.a,{value:"trainer",children:"Trainer"}),Object(a.jsx)(re.a,{value:"physiotherapeut",children:"Physiotherapeut"})]})]})]})},se=Object(N.a)({root:{display:"flex",flexDirection:"column"},formControl:{margin:"5px 10px",width:"60ch"}}),oe=function(e){var t=e.handleSpecificData,n=e.personType,r=se();return Object(a.jsx)("div",{className:r.root,children:function(){switch(n){case"fussballspieler":return Object(a.jsx)(H.a,{className:r.formControl,children:Object(a.jsx)(j.a,{variant:"outlined",required:!0,name:"fieldPosition",label:"Spielposition",id:"fussballfieldPosition",onInput:t})});case"handballspieler":return Object(a.jsx)(H.a,{className:r.formControl,children:Object(a.jsx)(j.a,{variant:"outlined",required:!0,name:"fieldPosition",label:"Spielposition",id:"handballfieldPosition",onInput:t})});case"tennisspieler":return Object(a.jsx)(H.a,{className:r.formControl,children:Object(a.jsx)(j.a,{variant:"outlined",required:!0,name:"handedness",label:"H\xe4ndigkeit",id:"handedness",onInput:t})});case"trainer":return Object(a.jsx)(H.a,{className:r.formControl,children:Object(a.jsx)(j.a,{variant:"outlined",required:!0,type:"number",name:"experience",label:"Erfahrung",id:"experience",onInput:t})});case"physiotherapeut":return Object(a.jsx)(H.a,{className:r.formControl,children:Object(a.jsx)(j.a,{variant:"outlined",required:!0,name:"treatmentType",label:"Behandlungsmethode",id:"treatmentType",onInput:t})});default:return Object(a.jsx)("div",{children:"Wrong Persontype"})}}()})},le=function(e){var t=e.general,n=e.specific,r=Object.keys(n)[0];return Object(a.jsxs)("div",{children:["Type: ",t.type," ",Object(a.jsx)("br",{}),"Vorname: ",t.firstName," ",Object(a.jsx)("br",{}),"Nachname: ",t.lastName," ",Object(a.jsx)("br",{}),"Geburtstag: ",t.birthday," ",Object(a.jsx)("br",{}),{fieldPosition:"Position",handedness:"Handigkeit",experience:"Erfahrung",treatmentType:"Therapiemethode"}[r],": ",n[r]]})},ue=Object(N.a)({root:{width:"100%"}}),de={type:"",firstName:"",lastName:"",birthday:""},je={type:"",firstName:"",lastName:"",birthday:""},be={},he={},Oe=function(e){var t=e.handleDialogClose,n=Object(r.useContext)(z),c=ue(),i=Object(r.useState)(de),s=Object(u.a)(i,2),o=s[0],l=s[1],d=Object(r.useState)(be),j=Object(u.a)(d,2),h=j[0],O=j[1],f=Object(r.useState)(0),m=Object(u.a)(f,2),p=m[0],v=m[1],g=["Personendaten","Typdaten"],y=function(e){je[e.target.name]=e.target.value},C=function(e){he[e.target.name]=e.target.value};return Object(a.jsxs)("div",{className:c.root,children:[Object(a.jsx)(U.a,{activeStep:p,children:g.map((function(e){return Object(a.jsx)(J.a,Object(x.a)(Object(x.a)({},{}),{},{children:Object(a.jsx)(G.a,Object(x.a)(Object(x.a)({},{}),{},{children:e}))}),e)}))}),Object(a.jsx)("div",{children:p===g.length?Object(a.jsxs)("div",{children:[Object(a.jsx)(R.a,{className:c.instructions,children:Object(a.jsx)(le,{general:o,specific:h})}),Object(a.jsx)(b.a,{onClick:function(){l(de),O(be),v(0)},className:c.button,children:"Reset"}),Object(a.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(e){e.preventDefault();var a=Object(x.a)(Object(x.a)({},je),he);a.birthday=new Date(a.birthday).getTime(),W(a).then((function(e){return e.json()})).then((function(e){n.persons.push(e.person),n.setPersons(Object(B.a)(n.persons))})),t()},children:"Hinzuf\xfcgen"})]}):Object(a.jsxs)("div",{children:[Object(a.jsx)(R.a,{className:c.instructions,children:function(e){switch(e){case 0:return Object(a.jsx)("div",{children:Object(a.jsx)(ie,{onAddPersonData:y})});case 1:return Object(a.jsx)(oe,{personType:o.type,handleSpecificData:C});default:return Object(a.jsxs)("div",{children:[Object(a.jsx)(Y.a,{}),"Unknown step"]})}}(p)}),Object(a.jsx)("div",{children:Object(a.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){l(je),O(he),v((function(e){return e+1}))},children:"Weiter"})})]})})]})},fe=function(e){var t=e.onClick,n=e.dialogState;return Object(a.jsx)("div",{children:Object(a.jsxs)(Q.a,{open:n,onClose:t,children:[Object(a.jsx)(Z.a,{id:"createPerson",onClose:t,children:"Person hinzuf\xfcgen"}),Object(a.jsx)($.a,{children:Object(a.jsx)(Oe,{handleDialogClose:t})})]})})},me=Object(N.a)({root:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},buttons:{marginBottom:"1em"}}),pe=function(){var e=Object(r.useContext)(m),t=me(),n=Object(r.useState)(!1),c=Object(u.a)(n,2),i=c[0],s=c[1];return Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)("h2",{children:"Personenverwaltung"}),e.user.role?Object(a.jsx)("div",{className:t.buttons,children:Object(a.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){s(!0)},children:"Person Erstellen"})}):"",Object(a.jsx)(te,{}),Object(a.jsx)(fe,{onClick:function(){s(!1)},dialogState:i})]})},xe=n(254),ve=n(256),ge=n(255),ye=n(24),Ce=n(249),Te=n(250),Ne=n(251),we=Object(r.createContext)([]),Ie=n(244),ke=n(245),Se=n(246),Pe=n(247),De=n(240),ze=n(248),Fe=n(138),Me=function(e){var t=Object(r.useContext)(z),n=Object(r.useState)(t.persons.reduce((function(e,t){return Object(x.a)(Object(x.a)({},e),{},Object(ye.a)({},t.id,!1))}),{})),c=Object(u.a)(n,2),i=c[0],s=c[1],o=Object(r.useState)(""),l=Object(u.a)(o,2),d=l[0],h=l[1],O=Object(r.useState)(""),f=Object(u.a)(O,2),m=f[0],p=f[1];return Object(a.jsxs)(a.Fragment,{children:[e.inputFields&&Object(a.jsx)(j.a,{variant:"outlined",required:!0,id:"teamName",label:"Name der Mannschaft",name:"teamName",autoFocus:!0,onInput:function(e){return h(e.target.value)}}),e.inputFields&&Object(a.jsxs)(H.a,{style:{width:"100%"},children:[Object(a.jsx)(ne.a,{id:"sportart",children:"Sportart"}),Object(a.jsxs)(ae.a,{labelId:"sportart",id:"simple-sportart",value:m,onChange:function(e){p(e.target.value)},children:[Object(a.jsx)(re.a,{value:"Fussball",children:"Fussball"}),Object(a.jsx)(re.a,{value:"Handball",children:"Handball"}),Object(a.jsx)(re.a,{value:"Tennis",children:"Tennis"})]})]}),Object(a.jsx)(Ie.a,{children:Object(a.jsxs)(ke.a,{size:"small","aria-label":"a dense table",children:[Object(a.jsx)(Se.a,{children:Object(a.jsxs)(Pe.a,{children:[Object(a.jsx)(De.a,{children:"Auswahl"}),Object(a.jsx)(De.a,{children:"ID"}),Object(a.jsx)(De.a,{children:"Vorname"}),Object(a.jsx)(De.a,{children:"Nachname"})]})}),Object(a.jsx)(ze.a,{children:t.persons.map((function(e){return Object(a.jsxs)(Pe.a,{children:[Object(a.jsx)(De.a,{padding:"checkbox",children:Object(a.jsx)(Fe.a,{checked:i[e.id],onChange:function(t){var n,a;n=e.id,a=t.target.checked,i[n]=a,s(Object(x.a)({},i))}})}),Object(a.jsx)(De.a,{component:"th",scope:"row",children:e.id}),Object(a.jsx)(De.a,{component:"th",scope:"row",children:e.firstName}),Object(a.jsx)(De.a,{children:e.lastName})]},e.id)}))})]})}),Object(a.jsx)(b.a,{size:"small",variant:"contained",color:"primary",onClick:function(){var t=[];for(var n in i)i[n]&&t.push(+n);if(e.inputFields)e.addTeam({id:Math.floor(1e3*Math.random()),sportType:m,name:d,mitglieder:t});else{var a=e.currentTeam.mitglieder.map((function(e){return e.personenId}));e.addTeam(t,a,e.currentTeam.id)}},children:e.inputFields?"neue Mannschaft erstellen":"Personen hinzuf\xfcgen"})]})},Ve="http://localhost:3006",qe=function(){var e=Object(r.useContext)(m),t=Object(r.useContext)(z),n=Object(r.useContext)(we),c=Object(r.useState)(n.mannschaften.reduce((function(e,t){return Object(x.a)(Object(x.a)({},e),{},Object(ye.a)({},t.id,!1))}),{})),i=Object(u.a)(c,2),s=i[0],o=i[1],l=Object(r.useState)(!1),d=Object(u.a)(l,2),j=d[0],h=d[1];Object(r.useEffect)((function(){o(n.mannschaften.reduce((function(e,t){return Object(x.a)(Object(x.a)({},e),{},Object(ye.a)({},t.id,!1))}),{}))}),[n.mannschaften]);var f=function(e){return t.persons.find((function(t){return t.id===e}))},p=function(){h(!1)};Object(r.useEffect)((function(){O.a.get(Ve+"/getMannschaften").then((function(e){n.setMannschaften(e.data)})).catch((function(e){console.log(e)}))}),[]);var v=function(e,t,a){var r=e.filter((function(e){return!t.includes(e)}));O.a.put(Ve+"/addToMannschaft",{personenIDs:r,mannschaftID:a}).then((function(e){n.mannschaften.find((function(t){return t.id===e.data.id})).mitglieder=e.data.mitglieder,n.setMannschaften(Object(B.a)(n.mannschaften))})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(a.Fragment,{children:[e.user.role?Object(a.jsx)(b.a,{size:"small",variant:"contained",color:"primary",onClick:function(){h(!0)},children:"Team hinzuf\xfcgen"}):"",Object(a.jsxs)(Q.a,{open:j,onClose:p,children:[Object(a.jsx)(Z.a,{id:"createPerson",onClose:p,children:"Neue Mannschaft"}),Object(a.jsx)($.a,{children:Object(a.jsx)(Me,{inputFields:!0,addTeam:function(e){O.a.post(Ve+"/createMannschaft",e).then((function(e){n.setMannschaften([].concat(Object(B.a)(n.mannschaften),[e.data]))})).catch((function(e){console.log(e)})),n.setMannschaften([].concat(Object(B.a)(n.mannschaften),[e]))}})})]}),Object(a.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:n.mannschaften.map((function(t){return Object(a.jsxs)(Ce.a,{style:{width:"50vh",margin:10},children:[Object(a.jsxs)(Te.a,{children:[Object(a.jsx)(R.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.name}),Object(a.jsxs)(Q.a,{open:s[t.id],onClose:function(){var e;e=t.id,s[e]=!1,o(Object(x.a)({},s))},children:[Object(a.jsx)(Z.a,{id:"createPerson",children:"Personen hinzuf\xfcgen"}),Object(a.jsx)($.a,{children:Object(a.jsx)(Me,{currentTeam:t,inputFields:!1,addTeam:v})})]}),t.mitglieder.map((function(r){return f(r.personenId)?Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:5},children:[Object(a.jsxs)("div",{children:[f(r.personenId).id," -",f(r.personenId).firstName,f(r.personenId).lastName]}),e.user.role?Object(a.jsx)(b.a,{width:"10",color:"secondary",size:"small",variant:"text",onClick:function(){!function(e,t){O.a.put(Ve+"/removeFromMannschaft",{personenID:e.personenId,mannschaftID:t.id}).then((function(a){t.mitglieder=t.mitglieder.filter((function(t){return t.personenId!==e.personenId})),n.setMannschaften(Object(B.a)(n.mannschaften))})).catch((function(e){console.log(e)}))}(r,t)},children:"x"}):""]},r.personenId):Object(a.jsx)("div",{},r.personenId)}))]}),e.user.role?Object(a.jsxs)(Ne.a,{children:[Object(a.jsx)(b.a,{size:"small",color:"secondary",onClick:function(){return e=t.id,void O.a.delete(Ve+"/deleteMannschaft/"+e).then((function(t){n.setMannschaften(n.mannschaften.filter((function(t){return t.id!==e})))})).catch((function(e){console.log(e)}));var e},children:"Team L\xf6schen"}),Object(a.jsx)(b.a,{size:"small",color:"primary",onClick:function(){var e;e=t.id,s[e]=!0,o(Object(x.a)({},s))},children:"Personen hinzuf\xfcgen"})]}):""]},t.id)}))})]})},Ee=n(86),Ae=n(253),We=n(252),Le=function(e){var t=Object(r.useState)(e.teams.reduce((function(e,t){return Object(x.a)(Object(x.a)({},e),{},Object(ye.a)({},t.id,!1))}),{})),n=Object(u.a)(t,2),c=n[0],i=n[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Z.a,{id:"createTurnier",children:e.title}),Object(a.jsx)($.a,{children:Object(a.jsx)(Ie.a,{children:Object(a.jsxs)(ke.a,{size:"small","aria-label":"a dense table",children:[Object(a.jsx)(Se.a,{children:Object(a.jsxs)(Pe.a,{children:[Object(a.jsx)(De.a,{children:"Auswahl"}),Object(a.jsx)(De.a,{children:"ID"}),Object(a.jsx)(De.a,{children:"Name"})]})}),Object(a.jsx)(ze.a,{children:e.teams.map((function(e){return Object(a.jsxs)(Pe.a,{children:[Object(a.jsx)(De.a,{padding:"checkbox",children:Object(a.jsx)(Fe.a,{checked:c[e.id],onChange:function(t){var n,a;n=e.id,a=t.target.checked,c[n]=a,i(Object(x.a)({},c))}})}),Object(a.jsx)(De.a,{component:"th",scope:"row",children:e.id}),Object(a.jsx)(De.a,{component:"th",scope:"row",children:e.name})]},e.id)}))})]})})}),Object(a.jsx)(We.a,{children:Object(a.jsx)(b.a,{variant:"contained",color:e.buttonInfo[0],onClick:function(){var t=[];for(var n in c)c[n]&&t.push(+n);e.action(t,e.teamsAlreadyInTurnier,e.turnier)},children:e.buttonInfo[1]})})]})},Be=Object(r.createContext)([]),He=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),c=n[0],i=n[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.a,{variant:"outlined",required:!0,id:"teamName",label:"Name des Turniers",name:"teamName",autoFocus:!0,onInput:function(e){return i(e.target.value)}}),Object(a.jsx)(b.a,{size:"small",variant:"contained",color:"primary",onClick:function(){e.addTurnier({id:Math.floor(1e3*Math.random()),teamIds:[],name:c,games:[]})},children:"Turnier erstellen"})]})},Ue=function(e){var t=Object(r.useContext)(we),n=function(){var n,a,r=[];return null===(n=e.turnier)||void 0===n||null===(a=n.teilnehmer)||void 0===a||a.map((function(e){var n=t.mannschaften.find((function(t){if(t.id===e.mannschaftID)return t}));n&&r.push(n)})),r},c=Object(r.useState)(""),i=Object(u.a)(c,2),s=i[0],o=i[1],l=Object(r.useState)(0),d=Object(u.a)(l,2),h=d[0],O=d[1],f=Object(r.useState)(""),m=Object(u.a)(f,2),p=m[0],x=m[1],v=Object(r.useState)(0),g=Object(u.a)(v,2),y=g[0],C=g[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(H.a,{style:{width:"35%"},children:[Object(a.jsx)(ne.a,{id:"team1",children:"Team 1"}),Object(a.jsx)(ae.a,{labelId:"team1",id:"simple-team1",value:s,onChange:function(e){o(e.target.value)},children:n().length>0&&n().map((function(e){return Object(a.jsx)(re.a,{value:e.id,children:e.name},e.id)}))})]}),Object(a.jsx)(j.a,{style:{width:"5%",marginLeft:10},id:"standard-number",label:"Pts",type:"number",onChange:function(e){O(e.target.value)}}),Object(a.jsx)(j.a,{style:{width:"5%",marginLeft:40},id:"standard-number",label:"Pts",type:"number",onChange:function(e){C(e.target.value)}}),Object(a.jsxs)(H.a,{style:{width:"35%",marginLeft:10},children:[Object(a.jsx)(ne.a,{id:"team2",children:"Team 2"}),Object(a.jsx)(ae.a,{labelId:"team2",id:"simple-team2",value:p,onChange:function(e){x(e.target.value)},children:n().length>0&&n().map((function(e){return Object(a.jsx)(re.a,{value:e.id,children:e.name},e.id)}))})]}),Object(a.jsx)(b.a,{color:"primary",onClick:function(){e.addGame({id:Math.floor(1e3*Math.random()),turnierId:e.turnier.id,team1Id:s,team1Punkte:h,team2Id:p,team2Punkte:y})},children:"add Match"})]})},Je="http://localhost:3007",Ge=function(){var e=Object(r.useContext)(m),t=Object(r.useContext)(Be),n=Object(r.useContext)(we),c=Object(r.useState)(!1),i=Object(u.a)(c,2),s=i[0],o=i[1],l=Object(r.useState)(t.turniere.reduce((function(e,t){return Object(x.a)(Object(x.a)({},e),{},Object(ye.a)({},t.id,!1))}),{})),j=Object(u.a)(l,2),h=j[0],f=j[1],p=Object(r.useState)(t.turniere.reduce((function(e,t){return Object(x.a)(Object(x.a)({},e),{},Object(ye.a)({},t.id,!1))}),{})),v=Object(u.a)(p,2),g=v[0],y=v[1];Object(r.useEffect)((function(){O.a.get("http://localhost:3006/getMannschaften").then((function(e){n.setMannschaften(e.data)})).catch((function(e){console.log(e)})),O.a.get(Je+"/getTurniere").then((function(e){t.setTurniere(Object(B.a)(e.data))})).catch((function(e){console.log(e)}))}),[]),Object(r.useEffect)((function(){f(t.turniere.reduce((function(e,t){return Object(x.a)(Object(x.a)({},e),{},Object(ye.a)({},t.id,!1))}),{})),y(t.turniere.reduce((function(e,t){return Object(x.a)(Object(x.a)({},e),{},Object(ye.a)({},t.id,!1))}),{}))}),[t.turniere]);var C=function(e){var t;return(null===(t=n.mannschaften.find((function(t){return t.id===e})))||void 0===t?void 0:t.name)||"Team not Found"},T=function(e){var t=[];return e&&e.length>0&&e.forEach((function(e){n.mannschaften.forEach((function(n){n.id===e.mannschaftID&&t.push(n)}))})),t},N=function(){o(!1)},w=function(e){O.a.post(Je+"/addSpielToTurnier",{turnierID:e.turnierId,game:e}).then((function(e){t.turniere.find((function(t){return t.id===e.data.id})).games=e.data.games,t.setTurniere(Object(B.a)(t.turniere))})).catch((function(e){console.log(e)}))},I=function(e){var n=arguments.length>2?arguments[2]:void 0;O.a.delete(Je+"/removeTeilnehmerFromTurnier",{data:{turnierID:n.id,teilnehmerIDs:e}}).then((function(e){n.teilnehmer=e.data.teilnehmer,n.games=e.data.games,t.setTurniere(Object(B.a)(t.turniere))})).catch((function(e){console.log(e)}))},k=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[];n.forEach((function(t){e.forEach((function(e){t.mannschaftID===e&&r.push(t.mannschaftID)}))}));var c=e.filter((function(e){if(!r.includes(e))return e}));O.a.post(Je+"/addTeilnehmerToTurnier",{turnierID:a.id,teilnehmerIDs:c}).then((function(e){a.teilnehmer=e.data.teilnehmer,t.setTurniere(Object(B.a)(t.turniere))})).catch((function(e){console.log(e)}))};return Object(a.jsxs)(a.Fragment,{children:[e.user.role?Object(a.jsx)(b.a,{variant:"outlined",color:"primary",onClick:function(){o(!0)},children:"Turnier hinzuf\xfcgen"}):"",Object(a.jsxs)(Q.a,{open:s,onClose:N,children:[Object(a.jsx)(Z.a,{id:"createTurnier",onClose:N,children:"Turnier hinzuf\xfcgen"}),Object(a.jsx)($.a,{children:Object(a.jsx)(He,{addTurnier:function(e){O.a.post(Je+"/createTurnier",e).then((function(e){t.setTurniere([].concat(Object(B.a)(t.turniere),[e.data]))})).catch((function(e){console.log(e)})),t.setTurniere([e].concat(Object(B.a)(t.turniere)))}})})]}),Object(a.jsx)(d.a,{maxWidth:"md",children:t.turniere.map((function(r){return Object(a.jsxs)(Ce.a,{style:{width:"100%",margin:10},children:[Object(a.jsxs)(Te.a,{children:[Object(a.jsx)(R.a,{gutterBottom:!0,variant:"h5",component:"h2",children:r.name}),e.user.role?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b.a,{size:"small",color:"primary",onClick:function(){var e;e=r.id,g[e]=!0,y(Object(x.a)({},g))},children:"Mannschaften hinzuf\xfcgen"}),Object(a.jsx)(b.a,{size:"small",color:"secondary",onClick:function(){var e;e=r.id,h[e]=!0,f(Object(x.a)({},h))},children:"Mannschaften entfernen"})]}):"",r.games.map((function(n){return Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsxs)(Ee.a,{elevation:1,style:{padding:10,margin:10,flexBasis:0,flexGrow:1,textAlign:"center"},children:[C(n.team1Id)," - ",n.team1Punkte]}),Object(a.jsxs)(Ee.a,{elevation:1,style:{padding:10,margin:10,flexBasis:0,flexGrow:1,textAlign:"center"},children:[n.team2Punkte," - ",C(n.team2Id)]}),e.user.role?Object(a.jsx)(b.a,{style:{height:"40%",marginTop:15},size:"small",variant:"contained",color:"secondary",onClick:function(){!function(e,n){O.a.delete(Je+"/removeSpielFromTurnier/"+n.id).then((function(a){var r=e.games.indexOf(n);r>-1&&e.games.splice(r,1),t.setTurniere(Object(B.a)(t.turniere))})).catch((function(e){console.log(e)}))}(r,n)},children:"X"}):""]},n.id)})),Object(a.jsx)(Ae.a,{style:{marginTop:20}}),e.user.role?Object(a.jsx)(Ue,{turnier:r,addGame:w}):""]}),e.user.role?Object(a.jsx)(Ne.a,{children:Object(a.jsx)(b.a,{size:"small",color:"secondary",onClick:function(){!function(e){O.a.delete(Je+"/deleteTurnier/"+e.id).then((function(n){var a=t.turniere.indexOf(e);a>-1&&t.turniere.splice(a,1),t.setTurniere(Object(B.a)(t.turniere))})).catch((function(e){console.log(e)}))}(r)},children:"Turnier L\xf6schen"})}):"",Object(a.jsx)(Q.a,{open:h[r.id],onClose:function(){var e;e=r.id,h[e]=!1,f(Object(x.a)({},h))},children:Object(a.jsx)(Le,{title:"Mannschaften entfernen",teams:T(r.teilnehmer),action:I,turnier:r,buttonInfo:["secondary","entfernen"]})}),Object(a.jsx)(Q.a,{open:g[r.id],onClose:function(){var e;e=r.id,g[e]=!1,y(Object(x.a)({},g))},children:Object(a.jsx)(Le,{title:"Mannschaften hinzuf\xfcgen",teams:n.mannschaften,teamsAlreadyInTurnier:r.teilnehmer,action:k,turnier:r,buttonInfo:["primary","hinzuf\xfcgen"]})})]},r.id)}))})]})},Re=function(e){var t=function(e){o(Object(x.a)(Object(x.a)({},s),{},{persons:e}))};Object(r.useEffect)(Object(V.a)(M.a.mark((function e(){var n,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E();case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,t(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[]);var n={persons:[],setPersons:t},c=Object(r.useState)(n),i=Object(u.a)(c,2),s=i[0],o=i[1];return Object(a.jsx)(z.Provider,{value:s,children:e.children})},Xe=function(e){var t={mannschaften:[{id:0,name:"hey",mitglieder:[1,2,4,6,3,5,698]},{id:1,name:"hey",mitglieder:[2,4,6]},{id:2,name:"hey",mitglieder:[1,2,3]},{id:3,name:"team5",mitglieder:[3,4,9]}],setMannschaften:function(e){s(Object(x.a)(Object(x.a)({},i),{},{mannschaften:e}))}},n=Object(r.useState)(t),c=Object(u.a)(n,2),i=c[0],s=c[1];return Object(a.jsx)(we.Provider,{value:i,children:e.children})},Ye=function(e){var t={turniere:[],setTurniere:function(e){s(Object(x.a)(Object(x.a)({},i),{},{turniere:e}))}},n=Object(r.useState)(t),c=Object(u.a)(n,2),i=c[0],s=c[1];return Object(a.jsx)(Be.Provider,{value:i,children:e.children})},_e=function(){var e=Object(r.useContext)(m),t=Object(r.useState)(!1),n=Object(u.a)(t,2),c=n[0],i=n[1],s=Object(r.useState)(!1),o=Object(u.a)(s,2),l=o[0],h=o[1],f=Object(r.useState)("hey"),p=Object(u.a)(f,2),x=p[0],v=p[1],g=Object(r.useState)(0),y=Object(u.a)(g,2),C=y[0],T=y[1];return 0===e.user.role?Object(a.jsx)("div",{children:"Hier kann ein Admin Nutzer erstellen"}):Object(a.jsxs)(d.a,{component:"main",maxWidth:"xs",onSubmit:function(e){e.preventDefault(),console.log(c,l,C),O.a.post("http://localhost:3005/user",{login:c,password:l,role:C}).then((function(e){v("User created!: "+JSON.stringify(e.data))})).catch((function(e){v(e.message),console.log(e)}))},children:[Object(a.jsxs)("form",{noValidate:!0,children:[Object(a.jsx)(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoFocus:!0,onInput:function(e){return i(e.target.value)}}),Object(a.jsx)(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onInput:function(e){return h(e.target.value)}}),Object(a.jsxs)(ae.a,{labelId:"rolle",id:"simple-rolle",defaultValue:C,value:C,onChange:function(e){T(e.target.value)},children:[Object(a.jsx)(re.a,{value:1,children:"Admin"}),Object(a.jsx)(re.a,{value:0,children:"User"})]}),Object(a.jsx)(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Nutzer erstellen"})]}),Object(a.jsx)("p",{children:JSON.stringify(x)})]})};var Ke=function(){return Object(a.jsx)("h2",{children:"Willkommen zum Verwaltungstool"})},Qe=function(){return Object(a.jsx)(g,{children:Object(a.jsx)(Re,{children:Object(a.jsx)(Xe,{children:Object(a.jsx)(Ye,{children:Object(a.jsx)(o.a,{children:Object(a.jsxs)("div",{children:[Object(a.jsx)(l.b,{path:"/",render:function(e){return Object(a.jsx)(xe.a,{position:"static",children:Object(a.jsxs)(ve.a,{value:e.location.pathname,children:[Object(a.jsx)(ge.a,{value:"/",label:"Home",component:o.b,to:"/"}),Object(a.jsx)(ge.a,{value:"/perVerw",label:"Personenverwaltung",component:o.b,to:"/perVerw"}),Object(a.jsx)(ge.a,{value:"/mannVerw",label:"Mannschaftsverwaltung",component:o.b,to:"/mannVerw"}),Object(a.jsx)(ge.a,{value:"/turnierVerw",label:"Turnierverwaltung",component:o.b,to:"/turnierVerw"}),Object(a.jsx)(ge.a,{value:"/createUser",label:"Nutzer erstellen",component:o.b,to:"/createUser"}),Object(a.jsx)(ge.a,{value:"/login",label:"Login",component:o.b,to:"/login"})]})})}}),Object(a.jsx)(y,{}),Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{path:"/login",children:Object(a.jsx)(p,{})}),Object(a.jsx)(T,{path:"/perVerw",children:Object(a.jsx)(pe,{})}),Object(a.jsx)(T,{path:"/mannVerw",children:Object(a.jsx)(qe,{})}),Object(a.jsx)(T,{path:"/turnierVerw",children:Object(a.jsx)(Ge,{})}),Object(a.jsx)(T,{path:"/createUser",children:Object(a.jsx)(_e,{})}),Object(a.jsx)(l.b,{path:"/",children:Object(a.jsx)(Ke,{})})]})]})})})})})})},Ze=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,262)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(Qe,{})}),document.getElementById("root")),Ze()}},[[188,1,2]]]);
//# sourceMappingURL=main.c7dc43fb.chunk.js.map